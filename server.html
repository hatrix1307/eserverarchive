<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Eagler Server List | Server</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="theme-color" content="#FB8464"/>

<link rel="icon" href="/favicon.ico"/>

<!-- Fonts -->
<link rel="preload" href="/_next/static/media/eafabf029ad39a43-s.p.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/_next/static/media/8888a3826f4a3af4-s.p.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/_next/static/media/0484562807a97172-s.p.woff2" as="font" type="font/woff2" crossorigin>

<!-- CSS -->
<link rel="stylesheet" href="/_next/static/css/2be4c86ae301c45c.css">
<link rel="stylesheet" href="/_next/static/css/4d58c923eeda897e.css">
<link rel="stylesheet" href="/_next/static/css/7b2b4dd7ecbe86d1.css">
<link rel="stylesheet" href="/_next/static/css/801a346d713e02dc.css">
<link rel="stylesheet" href="/_next/static/css/77845debe7d9c992.css">
<link rel="stylesheet" href="/_next/static/css/dc7d422723254cb5.css">
</head>

<body>
<div id="__next">
  <main class="__className_cc80f9">

    <!-- NAVBAR -->
    <nav class="Navbar_root__hs6un">
      <div class="Navbar_logo__eioWt">
        <img src="/eagler.png" alt="Logo">
        <h1>Eagler Server List</h1>
      </div>
      <div class="Navbar_spacer__t53No"></div>
      <ul class="Navbar_navElements__a5nON">
        <li><a href="/">Home</a></li>
        <li><a href="/news">Site News</a></li>
      </ul>
    </nav>

    <!-- CONTENT -->
    <div class="Server_root__SeWV0">
      <div class="Server_container__vKJ1B" id="server-root">
        <h1>Loading server…</h1>
      </div>
    </div>

    <!-- FOOTER -->
    <footer class="Footer_footer__yUjxG">
      <p>Copyright © Eagler Server List 2025</p>
      <br>
      <ul>
        <li><a href="/privacy"><b>Privacy Policy</b></a></li>
        <li><a href="/tos"><b>Terms of Service</b></a></li>
        <li><a href="https://discord.gg/jT7YZxDarC"><b>Discord Server</b></a></li>
      </ul>
    </footer>

  </main>
</div>

<script>
(async () => {
  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");
  const root = document.getElementById("server-root");

  if (!id) {
    root.innerHTML = "<h1>Invalid server ID</h1>";
    return;
  }

  try {
    // ✅ CORRECT PATH
    const res = await fetch(`/data/${id}.json`);
    if (!res.ok) throw new Error("Not found");

    const json = await res.json();
    const s = json.data || json;

    document.title = `Eagler Server List | ${s.name}`;

    root.innerHTML = `
      <h1>${s.name}</h1>

      <div class="Server_cardsRow__ulRw7">
        <div class="Card_card__dlNs0">
          <div class="Card_header__ZfKiq">
            <p>Server Info</p>
          </div>
          <div class="Card_content__D0RDr">
            <p><b>Address:</b> ${s.address || "N/A"}</p>
            <p><b>Votes:</b> ${s.votes ?? "0"}</p>
          </div>
        </div>
      </div>

      <div class="Server_cardsRow__ulRw7">
        <div class="Card_card__dlNs0">
          <div class="Card_header__ZfKiq">
            <p>Description</p>
          </div>
          <div class="Card_content__D0RDr">
            ${s.description ? s.description.replace(/\n/g, "<br>") : "No description"}
          </div>
        </div>
      </div>
    `;
  } catch (err) {
    root.innerHTML = "<h1>Server not found</h1>";
  }
})();
</script>

</body>
</html>
