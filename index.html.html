<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eagler Server List | Home</title>
    <link rel="stylesheet" href="./Eagler Server List _ Home_files/7b2b4dd7ecbe86d1.css">
    <link rel="stylesheet" href="./Eagler Server List _ Home_files/76289acd00d625c1.css">
</head>
<body>
    <div id="__next">
        <div id="server-list-container" class="css-13o7eu2" style="padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
            <p>Loading servers...</p>
        </div>
    </div>

    <script>
        async function loadServers() {
            try {
                // Fetch the local txt file containing multiple JSON objects
                const response = await fetch('./serverlistjson.txt');
                const text = await response.text();

                // Split the 8 pages of JSON objects
                const pageStrings = text.split(/}\s*{/).map((s, i, arr) => {
                    if (i === 0) return s + "}";
                    if (i === arr.length - 1) return "{" + s;
                    return "{" + s + "}";
                });

                const allServers = [];
                pageStrings.forEach(jsonStr => {
                    try {
                        const pageData = JSON.parse(jsonStr);
                        if (pageData.success) {
                            allServers.push(...pageData.data);
                        }
                    } catch (e) { console.error("Parse error on page", e); }
                });

                renderServers(allServers);
            } catch (err) {
                console.error("Fetch error:", err);
            }
        }

        function renderServers(servers) {
            const container = document.getElementById('server-list-container');
            container.innerHTML = ''; // Clear loader

            servers.forEach(server => {
                const card = document.createElement('div');
                card.className = "server-card";
                card.style = "background: #1e1e1e; border-radius: 12px; padding: 20px; border: 1px solid #333; color: white;";
                
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between;">
                        <h3 style="margin: 0;">${server.name} ${server.verified ? '✅' : ''}</h3>
                        <span style="color: ${server.online ? '#4caf50' : '#ff5252'}">
                            ${server.online ? '● ' + (server.motd?.online || 0) : 'Offline'}
                        </span>
                    </div>
                    <p style="color: #FB8464; font-family: monospace; margin: 15px 0;">${server.address}</p>
                    <div style="font-size: 0.85em; opacity: 0.7;">
                        Tags: ${server.tags.slice(0, 3).join(', ')}...
                    </div>
                    <div style="margin-top: 10px; font-weight: bold;">Votes: ${server.votes}</div>
                `;
                container.appendChild(card);
            });
        }

        document.addEventListener('DOMContentLoaded', loadServers);
    </script>
</body>
</html>
